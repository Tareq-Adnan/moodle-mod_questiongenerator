{"version":3,"file":"quiz_handle.min.js","sources":["../src/quiz_handle.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module quiz_handle\n *\n * @module     mod_questiongenerator/quiz_handle\n * @copyright  2024 YOUR NAME <your@email.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nexport const quizHandling = async (cmid) => { \n    let currentTab = 0;\n    var next = document.getElementById(\"nextBtn\");\n    var prev = document.getElementById(\"prevBtn\");\n    var form = document.getElementById(\"quizForm\");\n    showTab(currentTab);\n\n    function showTab(n) {\n        let x = document.getElementsByClassName(\"step\");\n        x[n].style.display = \"block\";\n        let progress = (n / (x.length - 1)) * 100;\n        document.querySelector(\".progress-bar\").style.width = progress + \"%\";\n        document.querySelector(\".progress-bar\").setAttribute(\"aria-valuenow\", progress);\n        document.getElementById(\"prevBtn\").style.display = n == 0 ? \"none\" : \"inline\";\n        document.getElementById(\"nextBtn\").innerHTML = n == x.length - 1 ? \"Submit\" : \"Next\";\n        if (n == x.length-1 ) {\n            document.getElementById(\"nextBtn\").setAttribute(\"type\", \"submit\");\n        } else {\n            document.getElementById(\"nextBtn\").setAttribute(\"type\", \"button\");\n        }\n    }\n        next.addEventListener(\"click\", function () {\n        nextPrev(1);\n    });\n    prev.addEventListener(\"click\", function () {\n        nextPrev(-1);\n    });\n\n    function nextPrev(n) {\n        let x = document.getElementsByClassName(\"step\");\n        if (n == 1 && !validateForm()) return false;\n        x[currentTab].style.display = \"none\";\n        currentTab += n;\n        if (currentTab >= x.length) {\n            // document.getElementById(\"quizForm\").submit();\n        }else {\n            showTab(currentTab);\n        }\n        \n    }\n\n    $(document).on('submit','#quizForm', (event) => {\n        event.preventDefault();\n        const formData = new FormData(form);\n        console.log(formData);\n        // const response = await fetch(`/mod/questiongenerator/quiz_handle.php?cmid=${cmid}`, {\n        //     method: 'POST',\n        //     body: formData\n        // });\n        // const result = await response.json();\n        // if (result.success) {\n        //     window.location.href = `/mod/questiongenerator/view.php?id=${cmid}`;\n        // } else {\n        //     alert('Failed to submit quiz');\n        // }\n    })\n\n    function validateForm() {\n        let valid = false;\n        let x = document.getElementsByClassName(\"step\");\n        let y = x[currentTab].getElementsByTagName(\"input\");\n        for (var i = 0; i < y.length; i++) {\n            if (y[i].type === \"radio\" && y[i].checked) {\n                valid = true;\n                break;\n            }\n        }\n        return valid;\n    }\n}"],"names":["obj","_jquery","__esModule","default","_exports","quizHandling","async","currentTab","next","document","getElementById","prev","form","showTab","n","x","getElementsByClassName","style","display","progress","length","querySelector","width","setAttribute","innerHTML","nextPrev","valid","y","getElementsByTagName","i","type","checked","validateForm","addEventListener","$","on","event","preventDefault","formData","FormData","console","log"],"mappings":"4FAuBuB,IAAAA;;;;;;;0FAAvBC,SAAuBD,IAAvBC,UAAuBD,IAAAE,WAAAF,KAAAG,QAAAH,KAsEtBI,SAAAC,aArE2BC,MAAAA,OACxB,IAAIC,WAAa,EACjB,IAAIC,KAAOC,SAASC,eAAe,WAC/BC,KAAOF,SAASC,eAAe,WAC/BE,KAAOH,SAASC,eAAe,YAGnC,SAASG,QAAQC,GACb,IAAIC,EAAIN,SAASO,uBAAuB,QACxCD,EAAED,GAAGG,MAAMC,QAAU,QACrB,IAAIC,SAAYL,GAAKC,EAAEK,OAAS,GAAM,IACtCX,SAASY,cAAc,iBAAiBJ,MAAMK,MAAQH,SAAW,IACjEV,SAASY,cAAc,iBAAiBE,aAAa,gBAAiBJ,UACtEV,SAASC,eAAe,WAAWO,MAAMC,QAAe,GAALJ,EAAS,OAAS,SACrEL,SAASC,eAAe,WAAWc,UAAYV,GAAKC,EAAEK,OAAS,EAAI,SAAW,OAC1EN,GAAKC,EAAEK,OAAO,EACdX,SAASC,eAAe,WAAWa,aAAa,OAAQ,UAExDd,SAASC,eAAe,WAAWa,aAAa,OAAQ,UAUhE,SAASE,SAASX,GACd,IAAIC,EAAIN,SAASO,uBAAuB,QACxC,GAAS,GAALF,IA2BR,WACI,IAAIY,OAAQ,EAERC,EADIlB,SAASO,uBAAuB,QAC9BT,YAAYqB,qBAAqB,SAC3C,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAEP,OAAQS,IAC1B,GAAkB,UAAdF,EAAEE,GAAGC,MAAoBH,EAAEE,GAAGE,QAAS,CACvCL,OAAQ,EACR,MAGR,OAAOA,MArCQM,GAAgB,OAAO,EACtCjB,EAAER,YAAYU,MAAMC,QAAU,OAC9BX,YAAcO,EACVP,YAAcQ,EAAEK,QAGhBP,QAAQN,YA/BhBM,QAAQN,YAgBJC,KAAKyB,iBAAiB,SAAS,WAC/BR,SAAS,MAEbd,KAAKsB,iBAAiB,SAAS,WAC3BR,UAAU,OAgBd,EAAAS,iBAAEzB,UAAU0B,GAAG,SAAS,aAAcC,QAClCA,MAAMC,iBACN,MAAMC,SAAW,IAAIC,SAAS3B,MAC9B4B,QAAQC,IAAIH"}